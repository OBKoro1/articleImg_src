---
title: 面试题-树状数组结构转化
date: 2018-08-20 00:27:10
tags:
- 面试题
categories: 面试题
---

### 题目如下：

![](https://github.com/OBKoro1/articleImg_src/blob/master/weibo_img_move/undefined?raw=true?raw=true)

这道题是我朋友发给我的，之前一开始看的时候，觉得很简单，但仔细往下看的时候，眉头一皱发现事情并不简单。

### 传进去的数组：

        let oldArr = [
            {
                '1_class': '工具',
                '2_class': '备忘录',
                '1_id': 1,
                '2_id': 2
            },
            {
                '1_class': '教育',
                '2_class': '学历教育',
                '3_class': '中等',
                '1_id': 3,
                '2_id': 4,
                '3_id': 6
            },
            {
                '1_class': '教育',
                '2_class': '学历教育',
                '3_class': '高等',
                '1_id': 3,
                '2_id': 4,
                '3_id': 5
            },
            {
                '1_class': '教育',
                '2_class': '成人教育',
                '1_id': 3,
                '2_id': 7,
            },
        ];

### 输出的数组：

        let result = [
            {
                value: 1,
                label: '工具',
                children: [
                    {
                        value: 2,
                        label: '备忘录',
                        children: []
                    }
                ]
            }, {
                value: 3,
                label: '教育',
                children: [
                    {
                        value: 4,
                        label: '学历教育',
                        children: [
                            {
                                value: 6,
                                label: '中等',
                                children: []
                            },
                            {
                                value: 5,
                                label: '高等',
                                children: []
                            }
                        ]
                    },
                    {
                        value: 7,
                        label: '成人教育',
                        children: []
                    }
                ]
            }
        ]

### 建议大家好好想想，争取能够自己解出来

### 参考一下我的解题方法：

1. 先算出层级嵌套数

    遍历数组，再遍历数组的元素，用`parseInt`拿到每一个值，将最大的值取出来，即为层级嵌套数。
    
2. 数组转成属性层级的对象。对象的属性是层级，值是数组，层级里面的值。
    
    1.去重操作(比如:`1_id`相等的话就不再重复添加)
    
    2.提取需要的信息，最终的值和相应父级的信息(之后组装数组的时候放到对应的地方，需要的信息)。
    
    最后输出的对象是这个样子

![](https://github.com/OBKoro1/articleImg_src/blob/master/weibo_img_move/undefined?raw=true?raw=true)

3. 将属性层级的对象转成树状结构数组。

    遍历对象，获取层级值。
    
    遍历层级的每个元素。
    
    找到对应的层级将值添加进去，否则递归继续找对应层级。

### 通关秘籍

这里有一份[通关秘籍](https://github.com/OBKoro1/simpleDemo/blob/b62f8ae98d345c287bea9b5622504fdbae626102/interviewQuestion/treeArr.html)，全宇宙最低价，998卖给你。
